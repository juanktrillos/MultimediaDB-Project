/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package jFrames;

import database.BaseDatos;
import entidades.Contenidos_Multimedia;
import entidades.Imagenes;
import entidades.Sitios_Interes;
import java.util.LinkedList;
import javax.swing.ImageIcon;
import javax.swing.JPanel;

/**
 *
 * @author CATV
 */
public class MenuAdmin extends JPanel {

    Ventana ven;
    LinkedList<Sitios_Interes> sitios;
    ImageIcon imagen;

    /**
     * Creates new form PAg
     *
     * @param ven
     */
    public MenuAdmin(Ventana ven) {
        initComponents();
        this.ven = ven;
        sitios = new LinkedList<>();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        Jlista = new javax.swing.JComboBox<String>();
        Jinsert = new javax.swing.JButton();
        JDelete = new javax.swing.JButton();
        JMod = new javax.swing.JButton();
        JNombre = new javax.swing.JTextField();
        JDireccion = new javax.swing.JTextField();
        JInfo = new javax.swing.JTextField();
        JCalificacion = new javax.swing.JComboBox<String>();
        JReseña = new javax.swing.JTextField();
        JHorario = new javax.swing.JTextField();
        JImagen = new javax.swing.JLabel();
        JAdd = new javax.swing.JButton();
        JAtras = new javax.swing.JButton();
        jButton1 = new javax.swing.JButton();
        JFondo = new javax.swing.JLabel();

        setPreferredSize(new java.awt.Dimension(720, 530));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        Jlista.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Centro Comercial", "Hotel", "Restaurante", "Museo" }));
        Jlista.setSelectedIndex(-1);
        Jlista.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JlistaActionPerformed(evt);
            }
        });
        add(Jlista, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 60, 209, -1));

        Jinsert.setText("Insertar");
        Jinsert.setEnabled(false);
        Jinsert.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JinsertActionPerformed(evt);
            }
        });
        add(Jinsert, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 430, -1, -1));

        JDelete.setText("Borrar");
        JDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JDeleteActionPerformed(evt);
            }
        });
        add(JDelete, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 480, -1, -1));

        JMod.setText("Modificar Sitios");
        JMod.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JModActionPerformed(evt);
            }
        });
        add(JMod, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 480, -1, -1));
        add(JNombre, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 100, 223, -1));
        add(JDireccion, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 140, 223, -1));
        add(JInfo, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 350, 223, 66));

        JCalificacion.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "1", "2", "3", "4", "5" }));
        JCalificacion.setSelectedIndex(1);
        add(JCalificacion, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 190, -1, -1));

        JReseña.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JReseñaActionPerformed(evt);
            }
        });
        add(JReseña, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 280, 223, 66));
        add(JHorario, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 230, 223, -1));
        add(JImagen, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 70, 240, 260));

        JAdd.setText("Agregar");
        JAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JAddActionPerformed(evt);
            }
        });
        add(JAdd, new org.netbeans.lib.awtextra.AbsoluteConstraints(490, 350, -1, -1));

        JAtras.setText("Atras");
        JAtras.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JAtrasActionPerformed(evt);
            }
        });
        add(JAtras, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 480, -1, -1));

        jButton1.setText("Estadistica");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 480, -1, -1));

        JFondo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Fotos/MenuAdmin-01-01.png"))); // NOI18N
        JFondo.setMinimumSize(new java.awt.Dimension(720, 530));
        JFondo.setPreferredSize(new java.awt.Dimension(720, 530));
        add(JFondo, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 720, 530));
    }// </editor-fold>//GEN-END:initComponents

    private void JinsertActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JinsertActionPerformed

        BaseDatos base = new BaseDatos();
        Sitios_Interes sitioTemp;
        Contenidos_Multimedia contTemp;
        Imagenes img;

        String nombre = JNombre.getText();
        String dir = JDireccion.getText();
        int calificacion = Integer.parseInt(JCalificacion.getSelectedItem().toString());
        String horario = JHorario.getText();
        String reseña = JReseña.getText();
        String info = JInfo.getText();
        int categoria = (Jlista.getSelectedIndex() + 1);

        String categoryString = Jlista.getSelectedItem().toString();

        if (base.crearConexion()) {
            sitioTemp = new Sitios_Interes(nombre, dir, calificacion, reseña, horario, info, categoria);
            //Se agrega el sitio a la bd
            base.insert(sitioTemp.insert());
            //se agrega la informacion buscada
            LinkedList<Object> idsSitio = base.select("SELECT idSitio FROM sitios_interes, categorias "
                    + "WHERE idCategoria=idCategoriaS and nombreCategoria='" + categoryString + "'");
            int idSitio = (int) idsSitio.getLast();

            contTemp = new Contenidos_Multimedia(idSitio, ven.cuenta.getCorreo());
            base.insert(contTemp.insert());

            LinkedList<Object> idsCont = base.select("SELECT idContenido FROM "
                    + "contenidos_multimedia WHERE idSitiosc=" + idSitio + "");
            int idCont = (int) idsCont.getLast();

            img = new Imagenes(nombre, reseña, imagen, idCont);
            base.insertImage(img);
        }
    }//GEN-LAST:event_JinsertActionPerformed

    private void JAddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JAddActionPerformed
        imagen = Imagenes.cargarArchivos();
        JImagen.setIcon(imagen);
        Jinsert.setEnabled(true);
    }//GEN-LAST:event_JAddActionPerformed

    private void JModActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JModActionPerformed
        // TODO add your handling code here:
        Modificar mod = new Modificar(ven);
        ven.setContentPane(mod);
        ven.setSize(720, 580);
    }//GEN-LAST:event_JModActionPerformed

    private void JReseñaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JReseñaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_JReseñaActionPerformed

    private void JAtrasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JAtrasActionPerformed
        // TODO add your handling code here:
        jPCuenta jPCuenta = new jPCuenta(ven);
        ven.setContentPane(jPCuenta);
        ven.setSize(410, 350);
    }//GEN-LAST:event_JAtrasActionPerformed

    private void JDeleteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JDeleteActionPerformed
        // TODO add your handling code here:
        Delete delete = new Delete(ven);
        ven.setContentPane(delete);
        ven.setSize(720, 580);
    }//GEN-LAST:event_JDeleteActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
        Grafica gp = new Grafica();
        ven.setContentPane(gp);
        ven.setSize(720, 580);
    }//GEN-LAST:event_jButton1ActionPerformed

    private void JlistaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JlistaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_JlistaActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton JAdd;
    private javax.swing.JButton JAtras;
    private javax.swing.JComboBox<String> JCalificacion;
    private javax.swing.JButton JDelete;
    private javax.swing.JTextField JDireccion;
    private javax.swing.JLabel JFondo;
    private javax.swing.JTextField JHorario;
    private javax.swing.JLabel JImagen;
    private javax.swing.JTextField JInfo;
    private javax.swing.JButton JMod;
    private javax.swing.JTextField JNombre;
    private javax.swing.JTextField JReseña;
    private javax.swing.JButton Jinsert;
    private javax.swing.JComboBox<String> Jlista;
    private javax.swing.JButton jButton1;
    // End of variables declaration//GEN-END:variables
}
